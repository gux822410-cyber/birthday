<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>ç”Ÿæ—¥å¿«ä¹</title>

<style>
html,body{
  margin:0;
  padding:0;
  height:100%;
  overflow:hidden;
  font-family:"Microsoft YaHei",sans-serif;
}

body{
  background:linear-gradient(-45deg,#0f2027,#203a43,#2c5364,#1c1c3c);
  background-size:400% 400%;
  animation:bgMove 15s ease infinite;
  color:#fff;
}
@keyframes bgMove{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

canvas{
  position:fixed;
  top:0;left:0;
}

#text{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
  white-space:pre-line;
  font-size:18px;
  line-height:1.9;
  pointer-events:none;
}
.name{
  font-size:22px;
  font-weight:bold;
  text-shadow:0 0 15px rgba(255,120,150,0.9);
}
@media (max-width:600px){
  #text{font-size:15px;}
}
</style>
</head>
<body>

<canvas id="c"></canvas>
<div id="text"></div>

<!-- ğŸµ éŸ³ä¹æ’­æ”¾å™¨ -->
<audio id="bgm" loop preload="auto"></audio>

<script>
/* ================= ğŸµ éŸ³ä¹ ================= */
const musicList=[
  "https://music.163.com/song/media/outer/url?id=1337065812.mp3",
  "https://music.163.com/song/media/outer/url?id=409650631.mp3",
  "https://music.163.com/song/media/outer/url?id=1374061026.mp3"
];
const audio=document.getElementById("bgm");
audio.src=musicList[Math.floor(Math.random()*musicList.length)];

/* æ‰‹æœºç«¯ï¼šé¦–æ¬¡äº¤äº’æ’­æ”¾ */
function unlockMusic(){
  audio.play();
  document.removeEventListener("touchstart",unlockMusic);
  document.removeEventListener("click",unlockMusic);
}
document.addEventListener("touchstart",unlockMusic);
document.addEventListener("click",unlockMusic);

/* ================= ğŸ¨ ç”»å¸ƒ ================= */
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");
let w,h;
function resize(){
  w=canvas.width=window.innerWidth;
  h=canvas.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

/* âœ¨ æ˜Ÿæ˜Ÿ */
let stars=[];
for(let i=0;i<200;i++){
  stars.push({x:Math.random()*w,y:Math.random()*h,r:Math.random()*1.5,a:Math.random()});
}

/* ğŸŒ¹ ç²’å­ */
let particles=[];
function Particle(x,y){
  this.x=x; this.y=y;
  this.vx=(Math.random()-0.5)*3;
  this.vy=(Math.random()-0.5)*3;
  this.life=1;
}
Particle.prototype.draw=function(){
  ctx.save();
  ctx.translate(this.x,this.y);
  ctx.globalAlpha=this.life;
  ctx.beginPath();
  ctx.moveTo(0,-8);
  ctx.bezierCurveTo(-6,-14,-18,0,0,14);
  ctx.bezierCurveTo(18,0,6,-14,0,-8);
  ctx.fillStyle="rgba(255,90,120,1)";
  ctx.shadowBlur=15;
  ctx.shadowColor="rgba(255,80,120,0.8)";
  ctx.fill();
  ctx.restore();
  this.x+=this.vx;
  this.y+=this.vy;
  this.life-=0.02;
};

/* ğŸ† çƒŸèŠ± */
let fireworks=[];
function Firework(x,y){
  this.x=x; this.y=y;
  this.r=0;
  this.color=`hsl(${Math.random()*360},100%,70%)`;
}
Firework.prototype.draw=function(){
  this.r+=1.2;
  ctx.beginPath();
  ctx.arc(this.x,this.y,this.r,0,Math.PI*2);
  ctx.strokeStyle=this.color.replace(")",`,${1-this.r/100})`);
  ctx.stroke();
};

/* ğŸ’¥ çˆ†ç‚¸ */
function boom(x,y){
  for(let i=0;i<25;i++) particles.push(new Particle(x,y));
  fireworks.push(new Firework(x,y));
}

/* æ‰“å¼€é¡µé¢è‡ªåŠ¨çˆ†ç‚¸ */
setTimeout(()=>boom(w/2,h/2),600);

/* é•¿æŒ‰è¿ç»­çˆ±å¿ƒ */
let pressTimer=null;
canvas.addEventListener("touchstart",e=>{
  const t=e.touches[0];
  pressTimer=setInterval(()=>boom(t.clientX,t.clientY),200);
});
canvas.addEventListener("touchend",()=>clearInterval(pressTimer));

canvas.addEventListener("click",e=>boom(e.clientX,e.clientY));

/* ğŸ¥ åŠ¨ç”» */
function draw(){
  requestAnimationFrame(draw);
  ctx.clearRect(0,0,w,h);

  stars.forEach(s=>{
    ctx.fillStyle=`rgba(255,255,255,${s.a})`;
    ctx.beginPath();
    ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    ctx.fill();
  });

  fireworks.forEach((f,i)=>{
    f.draw();
    if(f.r>100) fireworks.splice(i,1);
  });

  particles.forEach((p,i)=>{
    p.draw();
    if(p.life<=0) particles.splice(i,1);
  });
}
draw();

/* âŒ¨ï¸ æ‰“å­—æœºæ–‡å­— */
const textBox=document.getElementById("text");
const baseText=`<span class="name">æ¨å°çª â¤</span>

ä½ å·²ç»æ¥åˆ°è¿™ä¸ªä¸–ç•Œï¼š
{{time}}

æ„¿ä½ è¢«çˆ±åŒ…å›´
æ„¿ä½ å¹³å®‰å–œä¹
æ„¿ä½ å¿ƒæœ‰æ‰€å‘ï¼Œä¸‡äº‹æ— å¿§
æ„¿ä½ ç”Ÿæ´»æ˜æœ—ï¼Œå…‰èŠ’ä¸‡ä¸ˆå­—æœ‰æƒŠå–œï¼‰`;

let index=0;
function update(){
  const birth=new Date("1997/11/14").getTime();
  const now=Date.now();
  const t=Math.floor((now-birth)/1000);
  const d=Math.floor(t/86400);
  const h1=Math.floor(t%86400/3600);
  const m=Math.floor(t%3600/60);
  const s=t%60;

  const text=baseText.replace("{{time}}",
    `${d} å¤© ${h1} å°æ—¶ ${m} åˆ† ${s} ç§’`);

  index=0;
  const timer=setInterval(()=>{
    textBox.innerHTML=text.slice(0,index++);
    if(index>text.length) clearInterval(timer);
  },40);
}
update();
setInterval(update,1000);

/* ç‚¹åå­—ç‰¹æ•ˆ */
document.addEventListener("click",e=>{
  if(e.target.classList.contains("name")){
    boom(w/2,h/2);
  }
});
</script>

</body>
</html>
